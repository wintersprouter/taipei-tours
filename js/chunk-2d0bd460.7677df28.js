(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd460"],{"2afa":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("section",{staticClass:"tab"},[e("NavTabs")],1),e("section",{staticClass:"edit"},[e("form",{staticClass:"form",on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("h1",[t._v("編輯景點")]),e("div",{staticClass:"form-group"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attraction.name,expression:"attraction.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"請輸入景點名稱",maxlength:"20",required:""},domProps:{value:t.attraction.name},on:{input:function(a){a.target.composing||t.$set(t.attraction,"name",a.target.value)}}})]),e("div",{staticClass:"form-group"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attraction.tel,expression:"attraction.tel"}],staticClass:"form-control",attrs:{id:"tel",type:"text",name:"tel",maxlength:"20",placeholder:"+886-x-xxxxxxxx/+886-xxx-xxxxxx",required:""},domProps:{value:t.attraction.tel},on:{input:function(a){a.target.composing||t.$set(t.attraction,"tel",a.target.value)}}})]),e("div",{staticClass:"form-group"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attraction.address,expression:"attraction.address"}],staticClass:"form-control",attrs:{id:"address",type:"text",placeholder:"請輸入景點地址",name:"address",maxlength:"30",required:""},domProps:{value:t.attraction.address},on:{input:function(a){a.target.composing||t.$set(t.attraction,"address",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"official_site"}},[t._v("景點官網")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attraction.official_site,expression:"attraction.official_site"}],staticClass:"form-control",attrs:{id:"official_site",type:"text",placeholder:"請輸入景點官網",name:"official_site",maxlength:"50"},domProps:{value:t.attraction.official_site},on:{input:function(a){a.target.composing||t.$set(t.attraction,"official_site",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"open_time"}},[t._v("景點開放時間")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attraction.open_time,expression:"attraction.open_time"}],staticClass:"form-control",attrs:{id:"open_time",type:"text",placeholder:"請輸入景點開放時間",name:"open_time",maxlength:"50"},domProps:{value:t.attraction.open_time},on:{input:function(a){a.target.composing||t.$set(t.attraction,"open_time",a.target.value)}}})]),e("div",{staticClass:"form-group"},[t._m(3),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.attraction.introduction,expression:"attraction.introduction"}],attrs:{id:"introduction",rows:"6",name:"introduction",maxlength:"300",required:""},domProps:{value:t.attraction.introduction},on:{input:function(a){a.target.composing||t.$set(t.attraction,"introduction",a.target.value)}}})]),e("div",{staticClass:"form-action"},[e("button",{staticClass:"button-save",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" "+t._s(t.isProcessing?"處理中...":"儲存")+" ")])])])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"name"}},[t._v("景點名稱"),e("small",[t._v("*必填欄位")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"tel"}},[t._v("電話 "),e("small",[t._v("*必填欄位")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"address"}},[t._v("景點地址"),e("small",[t._v("*必填欄位")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"introduction"}},[t._v("景點介紹 "),e("small",[t._v("*必填欄位")])])}],o=e("1da1"),n=e("5530"),s=(e("96cf"),e("4de4"),e("b0c0"),e("d81d"),e("8bb1")),c="favorite-list",l={components:{NavTabs:s["a"]},data:function(){return{favorAttractions:[],attraction:{},isProcessing:!1}},created:function(){var t=this.$route.params.id;this.fetchAttraction(t)},beforeRouteUpdate:function(t,a,e){var i=t.params.id;this.fetchAttraction(i),e()},methods:{fetchAttraction:function(t){this.favorAttractions=JSON.parse(localStorage.getItem(c))||[];var a=this.favorAttractions.filter((function(a){return a.id==t}));this.attraction=a[0]},handleSubmit:function(){var t=this,a=this.attraction,e=a.name,i=a.tel,r=a.address,o=a.introduction,s=a.official_site,l=a.id;if(e&&i&&r&&o){var m=/^[+]\d{3}-\d{1}-\d{8}$/,u=/^[+]\d{3}-\d{3}-\d{6}$/;if(!m.test(i)&&!u.test(i))return alert("電話格式不正確");var d=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi;if(!s.length||d.test(s)){this.isProcessing=!0;var f=JSON.parse(localStorage.getItem(c)).map((function(a){return a.id===l?Object(n["a"])(Object(n["a"])({},a),t.attraction):Object(n["a"])({},a)}));this.saveStorage(f),this.isProcessing=!1,this.$router.push({name:"Favorite"}),alert("成功更新景點資訊")}else alert("官網網址格式不正確")}else alert("此欄位不得空白")},saveStorage:function(t){return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:localStorage.setItem(c,JSON.stringify(t));case 1:case"end":return a.stop()}}),a)})))()}},watch:{initialAttraction:function(t){this.attraction=Object(n["a"])(Object(n["a"])({},this.attraction),t)}}},m=l,u=e("2877"),d=Object(u["a"])(m,i,r,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0bd460.7677df28.js.map