{"version":3,"sources":["webpack:///./src/views/Favorite.vue?6c7f","webpack:///./src/components/InfoCard.vue?7a73","webpack:///./src/components/InfoCard.vue","webpack:///src/views/Favorite.vue","webpack:///./src/views/Favorite.vue?cf6e","webpack:///./src/views/Favorite.vue","webpack:///./src/views/Favorite.vue?39b4","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","_l","loadingCard","key","id","attraction","attrs","isFavoritedList","on","afterAddFavorite","totalPage","length","currentPage","pages","previousPage","nextPage","fetchFavoriteAttractions","staticRenderFns","_v","name","query","categoryIds","page","script","component","components","data","favorAttractions","attractions","isEmpty","created","methods","generatePagination","totalpages","push","i","getAttractionsByPage","slice","startIndex","pageLimit","isFavorited","filter","saveStorage","favoritedAttraction","$","isArray","isConstructor","isObject","toAbsoluteIndex","lengthOfArrayLike","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","SPECIES","nativeSlice","max","Math","target","proto","forced","start","end","Constructor","result","n","O","k","fin","undefined","constructor","Array","prototype","call"],"mappings":"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","file":"js/chunk-071a52d3.3b87c3f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('section',{staticClass:\"tab\"},[_c('NavTabs')],1),(_vm.isEmpty)?[_c('InfoCard')]:_vm._e(),_c('section',{staticClass:\"attractions\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"attractions-wrapper\"},[(_vm.isLoading)?_vm._l((_vm.loadingCards),function(loadingCard){return _c('SkeletonCards',{key:loadingCard.id})}):_vm._e(),_vm._l((_vm.attractions),function(attraction){return _c('Attraction',{key:attraction.id,attrs:{\"initial-attraction\":attraction,\"is-favorited-list\":_vm.isFavoritedList},on:{\"after-add-favorite\":_vm.afterAddFavorite,\"after-remove-favorite\":_vm.afterAddFavorite}})})],2)])]),_c('footer',[(_vm.totalPage.length > 1)?_c('Pagination',{attrs:{\"current-page\":_vm.currentPage,\"pages\":_vm.pages,\"total-page\":_vm.totalPage,\"previous-page\":_vm.previousPage,\"next-page\":_vm.nextPage,\"is-favorited-list\":_vm.isFavoritedList},on:{\"after-click-page\":_vm.fetchFavoriteAttractions}}):_vm._e()],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info-card\"},[_c('div',{staticClass:\"info-card-icon\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"bolt\"}})],1),_c('h2',{staticClass:\"info-card-title\"},[_vm._v(\"目前尚無最愛的景點\")]),_c('p',{staticClass:\"info-card-apply\"},[_c('router-link',{staticClass:\"info-card-link\",attrs:{\"to\":{ name: 'Home', query: { categoryIds: '', page: '1' } }}},[_vm._v(\" 查看更多景點 \"),_c('font-awesome-icon',{attrs:{\"icon\":\"arrow-right\"}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./InfoCard.vue?vue&type=template&id=d4eab8be&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <section class=\"tab\"><NavTabs /></section>\r\n    <template v-if=\"isEmpty\"><InfoCard /> </template>\r\n    <section class=\"attractions\">\r\n      <div class=\"container\">\r\n        <div class=\"attractions-wrapper\">\r\n          <template v-if=\"isLoading\">\r\n            <SkeletonCards\r\n              v-for=\"loadingCard in loadingCards\"\r\n              :key=\"loadingCard.id\"\r\n            />\r\n          </template>\r\n          <Attraction\r\n            v-for=\"attraction in attractions\"\r\n            :key=\"attraction.id\"\r\n            :initial-attraction=\"attraction\"\r\n            :is-favorited-list=\"isFavoritedList\"\r\n            @after-add-favorite=\"afterAddFavorite\"\r\n            @after-remove-favorite=\"afterAddFavorite\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer>\r\n      <Pagination\r\n        v-if=\"totalPage.length > 1\"\r\n        :current-page=\"currentPage\"\r\n        :pages=\"pages\"\r\n        :total-page=\"totalPage\"\r\n        :previous-page=\"previousPage\"\r\n        :next-page=\"nextPage\"\r\n        :is-favorited-list=\"isFavoritedList\"\r\n        @after-click-page=\"fetchFavoriteAttractions\"\r\n      />\r\n    </footer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport NavTabs from \"../components/NavTabs.vue\";\r\nimport Attraction from \"../components/Attraction.vue\";\r\nimport Pagination from \"../components/Pagination.vue\";\r\nimport InfoCard from \"../components/InfoCard.vue\";\r\nimport SkeletonCards from \"../components/SkeletonCards.vue\";\r\nconst STORAGE_KEY = \"favorite-list\";\r\nexport default {\r\n  name: \"Favorite\",\r\n  components: { NavTabs, Attraction, Pagination, InfoCard, SkeletonCards },\r\n  data() {\r\n    return {\r\n      favorAttractions: [],\r\n      attractions: [],\r\n      isEmpty: false,\r\n      pages: 1,\r\n      totalPage: [],\r\n      currentPage: 1,\r\n      isFavoritedList: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchFavoriteAttractions();\r\n  },\r\n  methods: {\r\n    async fetchFavoriteAttractions(page) {\r\n      this.favorAttractions =\r\n        JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\r\n      if (!this.favorAttractions.length) {\r\n        this.isEmpty = true;\r\n      }\r\n      this.currentPage = page ? page : 1;\r\n      this.attractions = this.getAttractionsByPage(this.currentPage);\r\n      this.generatePagination();\r\n    },\r\n    generatePagination() {\r\n      const pageLimit = 30;\r\n      const totalpages = [];\r\n      const total = this.favorAttractions.length;\r\n      const pages = Math.ceil(total / pageLimit);\r\n      for (let i = 1; i <= pages; i++) {\r\n        totalpages.push(i);\r\n      }\r\n      this.pages = pages;\r\n      this.totalPage = totalpages;\r\n    },\r\n    getAttractionsByPage(page) {\r\n      const pageLimit = 30;\r\n      const startIndex = (page - 1) * pageLimit;\r\n      return this.favorAttractions.slice(startIndex, startIndex + pageLimit);\r\n    },\r\n\r\n    afterAddFavorite(favoritedAttraction) {\r\n      const { id } = favoritedAttraction;\r\n      const isFavorited = this.favorAttractions.some((data) => data.id === id);\r\n      if (isFavorited) {\r\n        this.attractions = this.attractions.filter((data) => data.id !== id);\r\n        this.favorAttractions = this.favorAttractions.filter(\r\n          (data) => data.id !== id\r\n        );\r\n        if (!this.favorAttractions.length) {\r\n          this.isEmpty = true;\r\n        }\r\n        this.saveStorage();\r\n        return;\r\n      } else {\r\n        this.favorAttractions.push(favoritedAttraction);\r\n        this.saveStorage();\r\n        return;\r\n      }\r\n    },\r\n    async saveStorage() {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.favorAttractions));\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tab {\r\n  margin-bottom: 5rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Favorite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Favorite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Favorite.vue?vue&type=template&id=33e254db&scoped=true&\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js&\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Favorite.vue?vue&type=style&index=0&id=33e254db&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33e254db\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Favorite.vue?vue&type=style&index=0&id=33e254db&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}