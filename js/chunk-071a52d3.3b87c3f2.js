(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-071a52d3"],{"6aca":function(t,a,e){},a09f:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("section",{staticClass:"tab"},[e("NavTabs")],1),t.isEmpty?[e("InfoCard")]:t._e(),e("section",{staticClass:"attractions"},[e("div",{staticClass:"container"},[e("div",{staticClass:"attractions-wrapper"},[t.isLoading?t._l(t.loadingCards,(function(t){return e("SkeletonCards",{key:t.id})})):t._e(),t._l(t.attractions,(function(a){return e("Attraction",{key:a.id,attrs:{"initial-attraction":a,"is-favorited-list":t.isFavoritedList},on:{"after-add-favorite":t.afterAddFavorite,"after-remove-favorite":t.afterAddFavorite}})}))],2)])]),e("footer",[t.totalPage.length>1?e("Pagination",{attrs:{"current-page":t.currentPage,pages:t.pages,"total-page":t.totalPage,"previous-page":t.previousPage,"next-page":t.nextPage,"is-favorited-list":t.isFavoritedList},on:{"after-click-page":t.fetchFavoriteAttractions}}):t._e()],1)],2)},i=[],n=e("1da1"),o=(e("fb6a"),e("4de4"),e("96cf"),e("8bb1")),s=e("02d4"),c=e("1799"),f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"info-card"},[e("div",{staticClass:"info-card-icon"},[e("font-awesome-icon",{attrs:{icon:"bolt"}})],1),e("h2",{staticClass:"info-card-title"},[t._v("目前尚無最愛的景點")]),e("p",{staticClass:"info-card-apply"},[e("router-link",{staticClass:"info-card-link",attrs:{to:{name:"Home",query:{categoryIds:"",page:"1"}}}},[t._v(" 查看更多景點 "),e("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1)],1)])},u=[],l=e("2877"),d={},v=Object(l["a"])(d,f,u,!1,null,null,null),g=v.exports,p=e("dcce"),h="favorite-list",A={name:"Favorite",components:{NavTabs:o["a"],Attraction:s["a"],Pagination:c["a"],InfoCard:g,SkeletonCards:p["a"]},data:function(){return{favorAttractions:[],attractions:[],isEmpty:!1,pages:1,totalPage:[],currentPage:1,isFavoritedList:!0}},created:function(){this.fetchFavoriteAttractions()},methods:{fetchFavoriteAttractions:function(t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.favorAttractions=JSON.parse(localStorage.getItem(h))||[],a.favorAttractions.length||(a.isEmpty=!0),a.currentPage=t||1,a.attractions=a.getAttractionsByPage(a.currentPage),a.generatePagination();case 5:case"end":return e.stop()}}),e)})))()},generatePagination:function(){for(var t=30,a=[],e=this.favorAttractions.length,r=Math.ceil(e/t),i=1;i<=r;i++)a.push(i);this.pages=r,this.totalPage=a},getAttractionsByPage:function(t){var a=30,e=(t-1)*a;return this.favorAttractions.slice(e,e+a)},afterAddFavorite:function(t){var a=t.id,e=this.favorAttractions.some((function(t){return t.id===a}));return e?(this.attractions=this.attractions.filter((function(t){return t.id!==a})),this.favorAttractions=this.favorAttractions.filter((function(t){return t.id!==a})),this.favorAttractions.length||(this.isEmpty=!0),void this.saveStorage()):(this.favorAttractions.push(t),void this.saveStorage())},saveStorage:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:localStorage.setItem(h,JSON.stringify(t.favorAttractions));case 1:case"end":return a.stop()}}),a)})))()}}},m=A,b=(e("b0a0"),Object(l["a"])(m,r,i,!1,null,"33e254db",null));a["default"]=b.exports},b0a0:function(t,a,e){"use strict";e("6aca")},fb6a:function(t,a,e){"use strict";var r=e("23e7"),i=e("e8b5"),n=e("68ee"),o=e("861d"),s=e("23cb"),c=e("07fa"),f=e("fc6a"),u=e("8418"),l=e("b622"),d=e("1dde"),v=d("slice"),g=l("species"),p=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,a){var e,r,l,d=f(this),v=c(d),A=s(t,v),m=s(void 0===a?v:a,v);if(i(d)&&(e=d.constructor,n(e)&&(e===Array||i(e.prototype))?e=void 0:o(e)&&(e=e[g],null===e&&(e=void 0)),e===Array||void 0===e))return p.call(d,A,m);for(r=new(void 0===e?Array:e)(h(m-A,0)),l=0;A<m;A++,l++)A in d&&u(r,l,d[A]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-071a52d3.3b87c3f2.js.map