{"version":3,"sources":["webpack:///./src/views/FavoriteEdit.vue?951c","webpack:///src/views/FavoriteEdit.vue","webpack:///./src/views/FavoriteEdit.vue?2c48","webpack:///./src/views/FavoriteEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","_v","_m","directives","name","rawName","value","attraction","expression","attrs","domProps","target","composing","$set","isProcessing","_s","staticRenderFns","components","data","favorAttractions","created","fetchAttraction","id","beforeRouteUpdate","next","methods","tel","address","introduction","phone","test","telphone","alert","official_site","length","url","saveStorage","saveData","$router","push","watch","initialAttraction","component"],"mappings":"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","file":"js/chunk-2d0bd460.7677df28.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('section',{staticClass:\"tab\"},[_c('NavTabs')],1),_c('section',{staticClass:\"edit\"},[_c('form',{staticClass:\"form\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('h1',[_vm._v(\"編輯景點\")]),_c('div',{staticClass:\"form-group\"},[_vm._m(0),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.name),expression:\"attraction.name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"placeholder\":\"請輸入景點名稱\",\"maxlength\":\"20\",\"required\":\"\"},domProps:{\"value\":(_vm.attraction.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_vm._m(1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.tel),expression:\"attraction.tel\"}],staticClass:\"form-control\",attrs:{\"id\":\"tel\",\"type\":\"text\",\"name\":\"tel\",\"maxlength\":\"20\",\"placeholder\":\"+886-x-xxxxxxxx/+886-xxx-xxxxxx\",\"required\":\"\"},domProps:{\"value\":(_vm.attraction.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"tel\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_vm._m(2),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.address),expression:\"attraction.address\"}],staticClass:\"form-control\",attrs:{\"id\":\"address\",\"type\":\"text\",\"placeholder\":\"請輸入景點地址\",\"name\":\"address\",\"maxlength\":\"30\",\"required\":\"\"},domProps:{\"value\":(_vm.attraction.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"address\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"official_site\"}},[_vm._v(\"景點官網\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.official_site),expression:\"attraction.official_site\"}],staticClass:\"form-control\",attrs:{\"id\":\"official_site\",\"type\":\"text\",\"placeholder\":\"請輸入景點官網\",\"name\":\"official_site\",\"maxlength\":\"50\"},domProps:{\"value\":(_vm.attraction.official_site)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"official_site\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"open_time\"}},[_vm._v(\"景點開放時間\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.open_time),expression:\"attraction.open_time\"}],staticClass:\"form-control\",attrs:{\"id\":\"open_time\",\"type\":\"text\",\"placeholder\":\"請輸入景點開放時間\",\"name\":\"open_time\",\"maxlength\":\"50\"},domProps:{\"value\":(_vm.attraction.open_time)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"open_time\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_vm._m(3),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.attraction.introduction),expression:\"attraction.introduction\"}],attrs:{\"id\":\"introduction\",\"rows\":\"6\",\"name\":\"introduction\",\"maxlength\":\"300\",\"required\":\"\"},domProps:{\"value\":(_vm.attraction.introduction)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.attraction, \"introduction\", $event.target.value)}}})]),_c('div',{staticClass:\"form-action\"},[_c('button',{staticClass:\"button-save\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? \"處理中...\" : \"儲存\")+\" \")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"景點名稱\"),_c('small',[_vm._v(\"*必填欄位\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"tel\"}},[_vm._v(\"電話 \"),_c('small',[_vm._v(\"*必填欄位\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"address\"}},[_vm._v(\"景點地址\"),_c('small',[_vm._v(\"*必填欄位\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"introduction\"}},[_vm._v(\"景點介紹 \"),_c('small',[_vm._v(\"*必填欄位\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <section class=\"tab\"><NavTabs /></section>\r\n    <section class=\"edit\">\r\n      <form class=\"form\" @submit.stop.prevent=\"handleSubmit\">\r\n        <h1>編輯景點</h1>\r\n        <div class=\"form-group\">\r\n          <label for=\"name\">景點名稱<small>*必填欄位</small></label>\r\n          <input\r\n            id=\"name\"\r\n            class=\"form-control\"\r\n            v-model=\"attraction.name\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"請輸入景點名稱\"\r\n            maxlength=\"20\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"tel\">電話 <small>*必填欄位</small></label>\r\n          <input\r\n            id=\"tel\"\r\n            class=\"form-control\"\r\n            v-model=\"attraction.tel\"\r\n            type=\"text\"\r\n            name=\"tel\"\r\n            maxlength=\"20\"\r\n            placeholder=\"+886-x-xxxxxxxx/+886-xxx-xxxxxx\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"address\">景點地址<small>*必填欄位</small></label>\r\n          <input\r\n            id=\"address\"\r\n            class=\"form-control\"\r\n            v-model=\"attraction.address\"\r\n            type=\"text\"\r\n            placeholder=\"請輸入景點地址\"\r\n            name=\"address\"\r\n            maxlength=\"30\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"official_site\">景點官網</label>\r\n          <input\r\n            id=\"official_site\"\r\n            class=\"form-control\"\r\n            v-model=\"attraction.official_site\"\r\n            type=\"text\"\r\n            placeholder=\"請輸入景點官網\"\r\n            name=\"official_site\"\r\n            maxlength=\"50\"\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"open_time\">景點開放時間</label>\r\n          <input\r\n            id=\"open_time\"\r\n            class=\"form-control\"\r\n            v-model=\"attraction.open_time\"\r\n            type=\"text\"\r\n            placeholder=\"請輸入景點開放時間\"\r\n            name=\"open_time\"\r\n            maxlength=\"50\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"introduction\">景點介紹 <small>*必填欄位</small></label>\r\n          <textarea\r\n            id=\"introduction\"\r\n            v-model=\"attraction.introduction\"\r\n            rows=\"6\"\r\n            name=\"introduction\"\r\n            maxlength=\"300\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"form-action\">\r\n          <button type=\"submit\" class=\"button-save\" :disabled=\"isProcessing\">\r\n            {{ isProcessing ? \"處理中...\" : \"儲存\" }}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  </div>\r\n</template>\r\n<script>\r\nimport NavTabs from \"../components/NavTabs.vue\";\r\n\r\nconst STORAGE_KEY = \"favorite-list\";\r\nexport default {\r\n  components: { NavTabs },\r\n  data() {\r\n    return {\r\n      favorAttractions: [],\r\n      attraction: {},\r\n      isProcessing: false,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    const { id } = this.$route.params;\r\n    this.fetchAttraction(id);\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    const { id } = to.params;\r\n    this.fetchAttraction(id);\r\n    next();\r\n  },\r\n  methods: {\r\n    fetchAttraction(attractionId) {\r\n      this.favorAttractions =\r\n        JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\r\n      const attraction = this.favorAttractions.filter(\r\n        (item) => item.id == attractionId\r\n      );\r\n      this.attraction = attraction[0];\r\n    },\r\n    handleSubmit() {\r\n      const { name, tel, address, introduction, official_site, id } =\r\n        this.attraction;\r\n      if (!name || !tel || !address || !introduction) {\r\n        alert(\"此欄位不得空白\");\r\n        return;\r\n      }\r\n\r\n      let phone = /^[+]\\d{3}-\\d{1}-\\d{8}$/;\r\n      let telphone = /^[+]\\d{3}-\\d{3}-\\d{6}$/;\r\n      if (!phone.test(tel) && !telphone.test(tel)) {\r\n        return alert(\"電話格式不正確\");\r\n      }\r\n      let url =\r\n        /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\r\n\r\n      if (official_site.length && !url.test(official_site)) {\r\n        alert(\"官網網址格式不正確\");\r\n        return;\r\n      }\r\n      this.isProcessing = true;\r\n      const saveData = JSON.parse(localStorage.getItem(STORAGE_KEY)).map(\r\n        (item) => {\r\n          if (item.id === id) {\r\n            return {\r\n              ...item,\r\n              ...this.attraction,\r\n            };\r\n          } else {\r\n            return {\r\n              ...item,\r\n            };\r\n          }\r\n        }\r\n      );\r\n\r\n      this.saveStorage(saveData);\r\n      this.isProcessing = false;\r\n      this.$router.push({ name: \"Favorite\" });\r\n      alert(\"成功更新景點資訊\");\r\n    },\r\n    async saveStorage(saveData) {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(saveData));\r\n    },\r\n  },\r\n  watch: {\r\n    initialAttraction(newValue) {\r\n      this.attraction = { ...this.attraction, ...newValue };\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FavoriteEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FavoriteEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FavoriteEdit.vue?vue&type=template&id=12236696&\"\nimport script from \"./FavoriteEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./FavoriteEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}